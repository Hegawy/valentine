<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Pasant & Yusuf ðŸ’˜</title>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
:root{
  --pink:#ff3b7a;
  --pink2:#ff6aa2;
  --card: rgba(255,255,255,0.94);
  --shadow: 0 18px 60px rgba(0,0,0,0.35);

  --sideSize: 96px;
  --coupleW: min(78vw, 360px);
  --coupleH: 230px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }
body{
  background:#000;
  overflow:hidden;
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* BACKGROUND */
.bg{
  position:fixed; inset:0; z-index:-3;
  background-size:cover; background-position:center;
  filter: blur(2px) saturate(1.1);
  transform: scale(1.05);
  transition: opacity 1.2s ease;
}
.bg::after{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 20% 10%, rgba(255,59,122,.22), transparent 45%),
    radial-gradient(circle at 80% 30%, rgba(255,106,162,.18), transparent 55%),
    rgba(0,0,0,.45);
}

/* CONFETTI */
#confettiCanvas{
  position:fixed; inset:0;
  width:100vw; height:100vh;
  pointer-events:none;
  z-index:9999;
}

/* STAGE */
.stage{
  position:fixed;
  inset:0;
  padding:
    calc(14px + env(safe-area-inset-top))
    calc(14px + env(safe-area-inset-right))
    calc(14px + env(safe-area-inset-bottom))
    calc(14px + env(safe-area-inset-left));
}
.center{
  position:absolute;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
}

/* ENVELOPE */
.envelope{
  width:min(92vw,560px);
  height:min(64vh,380px);
  border-radius:28px;
  background:rgba(255,255,255,.95);
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
}
.envFlap{
  position:absolute; top:0; left:0; right:0;
  height:58%;
  background:linear-gradient(135deg, rgba(255,59,122,.14), rgba(255,106,162,.1));
  clip-path: polygon(0 0,100% 0,50% 82%);
  transform-origin:top;
  transition:.9s cubic-bezier(.2,.85,.2,1);
}
.seal{
  position:absolute;
  left:50%; bottom:52px;
  transform:translateX(-50%);
  width:66px; height:66px;
  background:linear-gradient(135deg,var(--pink),var(--pink2));
  border-radius:18px;
  display:flex; align-items:center; justify-content:center;
  color:#fff; font-weight:900;
  box-shadow:0 18px 34px rgba(255,59,122,.3);
}
.letter{
  position:absolute;
  left:50%; bottom:16px;
  transform:translateX(-50%);
  width:90%; height:76%;
  background:#fff;
  border-radius:22px;
  box-shadow:0 14px 30px rgba(0,0,0,.18);
  display:flex; align-items:center; justify-content:center;
  text-align:center;
  transition:.9s cubic-bezier(.2,.85,.2,1);
}
.openBtn{
  margin-top:10px;
  padding:12px 20px;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,var(--pink),var(--pink2));
  color:#fff;
  font-weight:900;
}

/* OPEN STATE */
.opened .envFlap{ transform:rotateX(180deg); }
.opened .letter{ transform:translateX(-50%) translateY(-190px) scale(1.04); }
.hidden{ display:none; }

/* CARD */
.card{
  width:min(92vw,640px);
  max-height:88vh;
  overflow:auto;
  background:var(--card);
  border-radius:28px;
  padding:18px;
  box-shadow:var(--shadow);
  text-align:center;
}

/* PHOTOS */
.topPhotos{
  position:relative;
  height:calc(var(--coupleH) + 18px);
}
.pfp{
  width:var(--sideSize);
  height:var(--sideSize);
  border-radius:26px;
  overflow:hidden;
  position:absolute; top:0;
  box-shadow:0 18px 34px rgba(0,0,0,.22);
}
.pfp img, .couple img{ width:100%; height:100%; object-fit:cover; }
#p1{ left:0; }
#p2{ right:0; }

.couple{
  position:absolute;
  left:50%; top:0;
  transform:translateX(-50%) scale(.82);
  width:var(--coupleW);
  height:var(--coupleH);
  border-radius:30px;
  overflow:hidden;
  opacity:0;
  transition:.5s ease;
}
.merged .pfp{ opacity:0; }
.merged .couple{ opacity:1; transform:translateX(-50%) scale(1); }

/* BUTTONS */
.btnRow{
  position:relative;
  height:82px;
  margin-top:10px;
}
#yes{
  padding:14px 22px;
  border-radius:18px;
  background:linear-gradient(135deg,var(--pink),var(--pink2));
  color:#fff;
  font-weight:900;
}
#no{
  position:absolute;
  padding:10px 14px;
  border-radius:14px;
  background:#111;
  color:#fff;
}

/* TEXT */
h1{ margin-top:10px; }
.valentineMsg{
  margin-top:14px;
  padding:14px;
  border-radius:18px;
  background:rgba(255,230,240,.9);
}
</style>
</head>

<body>
<div class="bg" id="bg"></div>
<canvas id="confettiCanvas"></canvas>

<div class="stage">

  <!-- ENVELOPE -->
  <div class="center" id="envScreen">
    <div class="envelope" id="env">
      <div class="envFlap"></div>
      <div class="seal">P + Y</div>
      <div class="letter">
        <div>
          <h2>ðŸ’Œ Open me</h2>
          <p>A message for <b>Pasant</b> from <b>Yusuf</b></p>
          <button class="openBtn" id="openBtn">Open</button>
        </div>
      </div>
    </div>
  </div>

  <!-- CARD -->
  <div class="center hidden" id="cardScreen">
    <div class="card" id="card">
      <div class="topPhotos" id="photos">
        <div class="pfp" id="p1"><img src="images/pasant1.jpeg"></div>
        <div class="pfp" id="p2"><img src="images/yusuf1.jpeg"></div>
        <div class="couple" id="couple"><img src="images/couple.jpeg"></div>
      </div>

      <h1 id="title">Will you be my Valentine? ðŸ’˜</h1>
      <p>Thereâ€™s only one correct answer ðŸ˜Œ</p>

      <div class="btnRow" id="row">
        <button id="yes">Yes ðŸ˜Œ</button>
        <button id="no">No ðŸ™‚</button>
      </div>

      <div class="valentineMsg" id="msg" style="display:none">
        ðŸ’– <b>Pasant & Yusuf</b> ðŸ’–<br><br>
        Two hearts. One story.<br>
        One Valentine â€” forever. ðŸŒ¹
      </div>
    </div>
  </div>

</div>

<audio id="noSound" src="no.mp3" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<script>
/* BACKGROUND */
const bg=document.getElementById("bg");
const imgs=["images/bg1.jpeg","images/bg2.jpeg","images/bg3.jpeg","images/bg4.jpeg"];
let i=0;
setInterval(()=>{bg.style.backgroundImage=`url(${imgs[i++%imgs.length]})`;},4500);
bg.style.backgroundImage=`url(${imgs[0]})`;

/* CONFETTI */
const canvas=document.getElementById("confettiCanvas");
const dpr=window.devicePixelRatio||1;
canvas.width=innerWidth*dpr;
canvas.height=innerHeight*dpr;
const conf=confetti.create(canvas,{resize:true});

/* OPEN */
openBtn.onclick=()=>{
  env.classList.add("opened");
  setTimeout(()=>{
    envScreen.classList.add("hidden");
    cardScreen.classList.remove("hidden");
  },900);
};

/* NO BUTTON */
const no=document.getElementById("no");
const row=document.getElementById("row");
const snd=document.getElementById("noSound");

function moveNo(){
  snd.currentTime=0; snd.play();
  const r=row.getBoundingClientRect();
  no.style.left=Math.random()*(r.width-60)+"px";
  no.style.top=Math.random()*(r.height-30)+"px";
}
no.onclick=e=>{e.preventDefault();moveNo();}
no.ontouchstart=e=>{e.preventDefault();moveNo();}

/* YES */
yes.onclick=()=>{
  photos.classList.add("merged");
  msg.style.display="block";
  title.innerText="Pasant & Yusuf ðŸ’˜";
  no.style.display="none";
  conf({particleCount:200,spread:160});
};
</script>
</body>
</html>
