<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pasant & Yusuf üíò</title>

<style>
  :root{
    --pink:#ff3b7a;
    --pink2:#ff6aa2;
    --dark:#0f0f12;
    --card: rgba(255,255,255,0.92);
    --shadow: 0 18px 60px rgba(0,0,0,0.35);
  }

  *{ box-sizing:border-box; }
  body{
    margin:0; height:100vh; overflow:hidden;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background:#000;
    color:#111;
  }

  /* ===== Background slideshow (single layer, reliable) ===== */
  .bg{
    position:fixed; inset:0; z-index:-3;
    background-size:cover; background-position:center;
    filter: blur(2px) saturate(1.1);
    transform: scale(1.05);
    transition: opacity 1.2s ease-in-out;
    opacity: 1;
  }
  .bg::after{
    content:"";
    position:absolute; inset:0;
    background: radial-gradient(circle at 20% 10%, rgba(255,59,122,0.22), transparent 45%),
                radial-gradient(circle at 80% 30%, rgba(255,106,162,0.18), transparent 55%),
                rgba(0,0,0,0.40);
  }

  /* floating hearts (subtle) */
  .hearts{
    position:fixed; inset:0; z-index:-2; pointer-events:none;
    opacity:0.35;
  }
  .heart{
    position:absolute;
    width:14px; height:14px;
    transform: rotate(45deg);
    background: rgba(255,59,122,0.35);
    border-radius: 3px;
    animation: floatUp linear infinite;
    filter: blur(0.2px);
  }
  .heart:before,.heart:after{
    content:"";
    position:absolute;
    width:14px; height:14px;
    background: inherit;
    border-radius: 50%;
  }
  .heart:before{ left:-7px; top:0; }
  .heart:after{ top:-7px; left:0; }

  @keyframes floatUp{
    from{ transform: translateY(20vh) rotate(45deg); opacity:0; }
    10%{ opacity:0.55; }
    to{ transform: translateY(-120vh) rotate(45deg); opacity:0; }
  }

  /* ===== Layout ===== */
  .wrap{
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  .card{
    width:min(560px, 94vw);
    background: var(--card);
    border-radius: 26px;
    box-shadow: var(--shadow);
    padding: 26px 22px 22px;
    position:relative;
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.55);
    backdrop-filter: blur(10px);
  }

  /* soft glow border */
  .card::before{
    content:"";
    position:absolute; inset:-2px;
    background: radial-gradient(circle at 30% 20%, rgba(255,59,122,0.35), transparent 40%),
                radial-gradient(circle at 80% 60%, rgba(255,106,162,0.28), transparent 50%);
    opacity:0.55;
    z-index:0;
  }
  .card > *{ position:relative; z-index:1; }

  /* ===== Top Photos (big, left & right) ===== */
  .topPhotos{
    position:relative;
    height: 120px;               /* reserved space for photos */
    margin-bottom: 10px;
  }

  .pfpFrame{
    width: 110px;
    height: 110px;
    border-radius: 24px;         /* rounded square frame */
    overflow:hidden;
    border: 3px solid rgba(255,255,255,0.9);
    box-shadow: 0 16px 30px rgba(0,0,0,0.22);
    background:#ddd;
    position:absolute;
    top: 0;
    transform: translateZ(0);
    transition: transform .35s ease, filter .35s ease, opacity .35s ease;
  }
  .pfpFrame img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  /* left & right placement */
  #pasantFrame{ left: 0; }
  #yusufFrame{ right: 0; }

  /* Couple frame (hidden until YES) */
  .coupleFrame{
    position:absolute;
    left:50%;
    top:0;
    transform: translateX(-50%) scale(0.82);
    width: 250px;
    height: 110px;
    border-radius: 26px;
    overflow:hidden;
    border: 3px solid rgba(255,255,255,0.92);
    box-shadow: 0 18px 36px rgba(0,0,0,0.25);
    opacity:0;
    filter: blur(2px);
    transition: opacity .55s ease, transform .55s ease, filter .55s ease;
    background:#ddd;
  }
  .coupleFrame img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  /* merge animation state */
  .merged #pasantFrame,
  .merged #yusufFrame{
    opacity:0;
    transform: scale(0.65) translateY(8px);
    filter: blur(2px);
    pointer-events:none;
  }
  .merged #coupleFrame{
    opacity:1;
    filter: blur(0);
    transform: translateX(-50%) scale(1);
    animation: pop .55s ease;
  }

  @keyframes pop{
    0%{ transform: translateX(-50%) scale(0.82); }
    60%{ transform: translateX(-50%) scale(1.05); }
    100%{ transform: translateX(-50%) scale(1.0); }
  }

  /* ===== Text ===== */
  h1{
    margin: 6px 0 0;
    font-size: 28px;
    line-height: 1.15;
    letter-spacing: -0.2px;
  }
  .sub{
    margin: 8px 0 0;
    opacity:.78;
    font-size:14px;
  }
  .question{
    margin: 14px 0 16px;
    font-size: 18px;
    opacity:.92;
  }

  /* ===== Buttons (livelier) ===== */
  .btnRow{
    position:relative;
    height:72px;                 /* space for teleport + animation */
    margin-top: 6px;
  }

  .btn{
    border:0;
    padding: 14px 22px;
    border-radius: 18px;
    font-size: 16px;
    cursor:pointer;
    user-select:none;
    transition: transform .16s ease, filter .16s ease, box-shadow .16s ease;
    will-change: transform;
  }
  .btn:active{ transform: translateY(1px) scale(0.99); }

  /* YES button: gradient + shine + pulse */
  #yes{
    background: linear-gradient(135deg, var(--pink), var(--pink2));
    color:#fff;
    font-weight: 800;
    box-shadow: 0 16px 32px rgba(255,59,122,0.28);
    position:relative;
    overflow:hidden;
  }
  #yes::after{
    content:"";
    position:absolute;
    top:-30%;
    left:-60%;
    width: 60%;
    height: 160%;
    background: rgba(255,255,255,0.22);
    transform: rotate(18deg);
    transition: left .6s ease;
  }
  #yes:hover{
    transform: translateY(-2px) scale(1.02);
    filter: brightness(1.02);
    box-shadow: 0 18px 38px rgba(255,59,122,0.33);
  }
  #yes:hover::after{ left:120%; }

  /* subtle pulse */
  #yes.pulsing{
    animation: pulse 1.35s ease-in-out infinite;
  }
  @keyframes pulse{
    0%,100%{ transform: translateY(0) scale(1); }
    50%{ transform: translateY(-1px) scale(1.03); }
  }

  /* NO button: dark + wiggle */
  #no{
    background: #15151a;
    color:#fff;
    position:absolute;
    right:0;
    top:0;
    box-shadow: 0 14px 26px rgba(0,0,0,0.25);
  }
  #no:hover{
    animation: wiggle .25s ease-in-out infinite;
    filter: brightness(1.05);
  }
  @keyframes wiggle{
    0%,100%{ transform: translateX(0); }
    50%{ transform: translateX(-2px); }
  }

  /* result box */
  .yay{
    display:none;
    margin-top: 14px;
    padding: 14px 14px;
    border-radius: 18px;
    background: rgba(255, 235, 243, 0.92);
    border: 1px solid rgba(255, 59, 122, 0.22);
    font-size: 16px;
    line-height: 1.45;
  }

  .spotify{
    margin-top: 14px;
    border-radius: 16px;
    overflow:hidden;
    border: 1px solid rgba(0,0,0,0.08);
  }

  .tiny{
    margin-top:10px;
    font-size:12px;
    opacity:.75;
    text-align:center;
  }

  /* Confetti canvas */
  #confettiCanvas{
    position:fixed; inset:0;
    pointer-events:none;
    z-index:9999;
  }
</style>
</head>

<body>

<div class="bg" id="bg"></div>
<div class="hearts" id="hearts"></div>
<canvas id="confettiCanvas"></canvas>

<div class="wrap">
  <div class="card" id="card">

    <!-- TOP PHOTO AREA -->
    <div class="topPhotos" id="topPhotos">
      <div class="pfpFrame" id="pasantFrame">
        <img src="images/pasant1.jpeg" alt="Pasant">
      </div>
      <div class="pfpFrame" id="yusufFrame">
        <img src="images/yusuf1.jpeg" alt="Yusuf">
      </div>

      <div class="coupleFrame" id="coupleFrame">
        <img src="images/couple.jpeg" alt="Pasant and Yusuf">
      </div>
    </div>

    <h1 id="title">Will you be my Valentine? üíò</h1>
    <div class="sub">Be careful‚Ä¶ the ‚ÄúNo‚Äù button is extremely shy üôÇ</div>

    <div class="question">Pasant‚Ä¶ will you be my Valentine? üåπ</div>

    <div class="btnRow" id="btnRow">
      <button class="btn pulsing" id="yes">Yes üòå</button>
      <button class="btn" id="no">No üôÇ</button>
    </div>

    <div class="yay" id="yay">
      YAAAAY!! ‚ù§Ô∏èüéâ<br/>
      <b>Pasant & Yusuf</b> ‚Äî officially Valentines.<br/>
      Text me: <b>"YES Valentine"</b> üòÑ
    </div>

    <!-- Spotify embed: replace src with your chosen track -->
    <div class="spotify">
      <iframe
        style="border-radius:16px"
        src="https://open.spotify.com/embed/track/7qiZfU4dY1lWllzX7mPBI3?utm_source=generator"
        width="100%"
        height="152"
        frameBorder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy">
      </iframe>
    </div>

    <div class="tiny">
      Optional: add <b>song.mp3</b> in repo root to play audio after clicking ‚ÄúYes‚Äù.
    </div>

    <audio id="song" src="song.mp3" preload="auto"></audio>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

<script>
  /* ===== Background slideshow (reliable) ===== */
  const bg = document.getElementById("bg");
  const bgImages = [
    "images/bg1.jpeg",
    "images/bg2.jpeg",
    "images/bg3.jpeg",
    "images/bg4.jpeg"
  ];
  let bgIndex = 0;

  function setBg(i){
    bg.style.opacity = "0";
    setTimeout(() => {
      bg.style.backgroundImage = `url('${bgImages[i]}')`;
      bg.style.opacity = "1";
    }, 450);
  }
  setBg(bgIndex);
  setInterval(() => {
    bgIndex = (bgIndex + 1) % bgImages.length;
    setBg(bgIndex);
  }, 4500);

  /* ===== Floating hearts (subtle ambience) ===== */
  const hearts = document.getElementById("hearts");
  function spawnHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    const left = Math.random() * 100;
    const size = 10 + Math.random() * 14;         // 10..24px
    const dur = 7 + Math.random() * 8;            // 7..15s
    const delay = Math.random() * 2;              // 0..2s
    h.style.left = left + "vw";
    h.style.bottom = (-10 - Math.random() * 20) + "vh";
    h.style.width = size + "px";
    h.style.height = size + "px";
    h.style.animationDuration = dur + "s";
    h.style.animationDelay = delay + "s";
    hearts.appendChild(h);
    setTimeout(() => h.remove(), (dur + delay) * 1000);
  }
  for(let i=0;i<14;i++) spawnHeart();
  setInterval(spawnHeart, 900);

  /* ===== No button teleport (inside whole card) ===== */
  const noBtn = document.getElementById("no");
  const card = document.getElementById("card");
  const btnRow = document.getElementById("btnRow");

  function teleportNo(){
    const cardRect = card.getBoundingClientRect();
    const rowRect  = btnRow.getBoundingClientRect();
    const btnRect  = noBtn.getBoundingClientRect();

    // constrain it to the button row area (cleaner), but truly random inside it
    const pad = 6;
    const maxX = rowRect.width - btnRect.width - pad;
    const maxY = rowRect.height - btnRect.height - pad;

    const x = Math.max(pad, Math.random() * maxX);
    const y = Math.max(pad, Math.random() * maxY);

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  // absolute position inside the row
  noBtn.style.position = "absolute";
  teleportNo();

  // make it basically unclickable
  noBtn.addEventListener("mouseenter", teleportNo);
  noBtn.addEventListener("mousemove", teleportNo);
  noBtn.addEventListener("click", (e) => { e.preventDefault(); teleportNo(); });

  /* ===== Confetti ===== */
  const myConfetti = confetti.create(document.getElementById("confettiCanvas"), {
    resize:true,
    useWorker:true
  });
  function burst(){
    myConfetti({ particleCount: 160, spread: 75, origin: { y: 0.62 } });
    setTimeout(() => myConfetti({ particleCount: 110, spread: 110, origin: { y: 0.55 } }), 220);
    setTimeout(() => myConfetti({ particleCount: 90,  spread: 95,  origin: { y: 0.60 } }), 430);
  }

  /* ===== YES action: merge photos + update title + confetti + play music ===== */
  const yesBtn = document.getElementById("yes");
  const yay = document.getElementById("yay");
  const title = document.getElementById("title");
  const topPhotos = document.getElementById("topPhotos");
  const song = document.getElementById("song");

  yesBtn.addEventListener("click", async () => {
    // UI updates
    yay.style.display = "block";
    title.textContent = "Pasant & Yusuf üíò";
    topPhotos.classList.add("merged");

    yesBtn.classList.remove("pulsing");
    yesBtn.textContent = "Locked in ‚úÖ";
    yesBtn.disabled = true;

    // hide no forever
    noBtn.style.display = "none";

    // confetti
    burst();

    // try play local mp3 (optional)
    try{
      await song.play();
    } catch(e){
      // ignore if blocked / missing
    }
  });
</script>

</body>
</html>
